/* jQuery.NobleCount v 1.0 http://tpgblog.com/noblecount/
compiled by http://yui.2clics.net/ */
(function(c){c.fn.NobleCount=function(j,i){var k;var h=false;if(typeof j=="string"){k=c.extend({},c.fn.NobleCount.settings,i);if(typeof i!="undefined"){h=((typeof i.max_chars=="number")?true:false)}return this.each(function(){var l=c(this);g(l,j,k,h)})}return this};c.fn.NobleCount.settings={on_negative:null,on_positive:null,on_update:null,max_chars:140,block_negative:false,cloak:false,in_dom:false};function g(h,n,o,i){var m=o.max_chars;var k=c(n);if(!i){var l=k.text();var j=(/^[1-9]\d*$/).test(l);if(j){m=l}}b(h,k,o,m,true);c(h).bind("keydown.noblecount",function(p){b(h,k,o,m,false);if(a(p,h,o,m)==false){d(h,k,o,m);return false}});c(h).bind("keyup.noblecount",function(p){b(h,k,o,m,false);if(a(p,h,o,m)==false){return false}});c(h).bind("paste.noblecount",function(p){b(h,k,o,m,false);setTimeout(function(){if(a(p,h,o,m)==false){d(h,k,o,m);return false}},5)})}function d(h,i,l,k){var j=c(h).val();c(h).val(j.substr(0,k));b(h,i,l,k,false)}function a(l,h,m,k){if(m.block_negative){var i=l.which;var j;if(typeof document.selection!="undefined"){j=(document.selection.createRange().text.length>0)}else{j=(h[0].selectionStart!=h[0].selectionEnd)}if((!((f(h,k)<1)&&(i>47||i==32||i==0||i==13)&&!l.ctrlKey&&!l.altKey&&!j))==false){return false}else{if((f(h,k)<1)&&l.type=="paste"){return false}}}return true}function f(h,i){return i-(c(h).val()).length}function b(h,j,m,k,i){var l=f(h,k);if(l<0){e(m.on_negative,m.on_positive,h,j,m,l)}else{e(m.on_positive,m.on_negative,h,j,m,l)}if(m.cloak){if(m.in_dom){j.attr("data-noblecount",l)}}else{j.text(l)}if(!i&&jQuery.isFunction(m.on_update)){m.on_update(h,j,m,l)}}function e(j,h,i,k,m,l){if(j!=null){if(typeof j=="string"){k.addClass(j)}else{if(jQuery.isFunction(j)){j(i,k,m,l)}}}if(h!=null){if(typeof h=="string"){k.removeClass(h)}}}})(jQuery);